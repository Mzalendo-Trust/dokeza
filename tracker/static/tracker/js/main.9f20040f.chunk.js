(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{30:function(e,t,c){},93:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(0),r=c(18),s=c.n(r),i=c(8),l=c(48),o=c(45),j=c(6),d=(c(54),c(30),c(10)),b=c(42),u=c(11),h=c.n(u),O=c(43),f=c.n(O),x=c(94),m={v:"VERTICAL",va:"VERTICAL_ALTERNATING",h:"HORIZONTAL"},p="",g={option:function(e,t){return Object(i.a)(Object(i.a)({},e),{},{cursor:"pointer"})},control:function(e){return Object(i.a)(Object(i.a)({},e),{},{minWidth:"200px",cursor:"pointer"})}},v=c(19),S=function(e){var t=e.onChange,c=Object(a.useState)([]),r=Object(d.a)(c,2),s=r[0],i=r[1];"".concat(p,"/api/tracker/");return Object(a.useEffect)((function(){h.a.get("/api/tracker/bills").then((function(e){i(e.data.map((function(e){return{value:e.id,label:e.title}})))})).catch((function(e){return console.log(e)}))}),[]),Object(n.jsx)(v.a,{menuPortalTarget:document.querySelector("body"),placeholder:"Select Bill...",options:s,onChange:t,styles:g})},y=function(){return Object(n.jsx)("center",{children:Object(n.jsx)("div",{className:"loading",children:Object(n.jsxs)("h6",{children:[Object(n.jsx)("span",{children:"L"}),Object(n.jsx)("span",{children:"o"}),Object(n.jsx)("span",{children:"a"}),Object(n.jsx)("span",{children:"d"}),Object(n.jsx)("span",{children:"i"}),Object(n.jsx)("span",{children:"n"}),Object(n.jsx)("span",{children:"g"}),Object(n.jsx)("span",{children:"."}),Object(n.jsx)("span",{children:"."}),Object(n.jsx)("span",{children:"."})]})})})},k=c(15),C=c.n(k),B=c(22),F=c.n(B);C.a.extend(F.a);var w=function(e){var t=Object(a.useState)([]),c=Object(d.a)(t,2),r=c[0],s=c[1],l=Object(a.useState)([]),o=Object(d.a)(l,2),j=o[0],u=o[1],O=Object(a.useState)({}),g=Object(d.a)(O,2),v=g[0],k=g[1],B=Object(a.useState)(),F=Object(d.a)(B,2),w=F[0],T=F[1],N=Object(a.useState)(!0),A=Object(d.a)(N,2),D=A[0],_=A[1],M=Object(a.useState)(!1),P=Object(d.a)(M,2),E=P[0],Y=P[1],R="".concat(p,"/api/tracker/list"),I="".concat(p,"/api/tracker/delete"),L=function(t){return{bill_id:t.bill,title:C()(t.stage_date).format("Do MMM YYYY"),cardSubtitle:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("a",{href:"".concat(p,"/bills/").concat(t.bill_slug),children:[t.bill_name," \xa0\xa0",Object(n.jsx)("i",{className:"fas fa-external-link-alt"})]}),e.isadmin&&Object(n.jsx)(x.a,{style:{border:"0"},className:"float-right",color:"danger",outline:!0,size:"sm",onClick:function(){!function(e){var t=document.head.querySelector('meta[name="csrf-token"]');t&&(h.a.defaults.headers.common["X-CSRFToken"]=t.content),h.a.delete("".concat(I,"/").concat(e)).then((function(e){Y(!0)})).catch((function(e){return console.error("Tracker: ",e)}))}(t.uuid)},children:"\xd7"})]}),cardDetailedText:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("b",{children:t.stage})," "]}),Object(n.jsx)("br",{}),t.details,Object(n.jsx)("hr",{style:{color:"red",borderTop:"1px dotted red"}}),Object(n.jsxs)("i",{children:["sponsor: ",t.bill_sponsor]}),Object(n.jsx)("br",{}),t.bill_purpose]})}};return Object(a.useEffect)((function(){h.a.get(R).then((function(e){var t=e.data.map(L);s(t),u(t),_(!1)})).catch((function(e){return console.log("Tracker: ",e)}))}),[]),Object(a.useEffect)((function(){E&&h.a.get(R).then((function(t){var c=t.data.map(L);s(c),k(Object(i.a)({},e.selBill)),E&&Y(!1)})).catch((function(e){return console.log(e)}))}),[E]),Object(a.useEffect)((function(){var t=e.selBill?e.selBill.value:v.value;u(r.filter((function(e){return e.bill_id==t}))),T(Object(n.jsx)(n.Fragment,{}))}),[v,e.selBill]),Object(a.useEffect)((function(){e.performedAjax&&h.a.get(R).then((function(t){var c=t.data.map(L);s(c),k(e.selBill),e.setPerformedAjax&&e.setPerformedAjax(!1)})).catch((function(e){return console.log(e)}))}),[e.performedAjax]),Object(a.useEffect)((function(){e.hideInitBills&&f.a.isEmpty(e.selBill)?T(Object(n.jsx)(n.Fragment,{})):j.length>0&&T(Object(n.jsx)(b.a,{items:j,theme:{primary:"red",secondary:"white",cardBgColor:"white",cardForeColor:"black "},slideShow:!0,slideItemDuration:2500,scrollable:!0,mode:m[e.chronoMode?e.chronoMode:"v"]}))}),[j]),D?Object(n.jsx)(y,{}):Object(n.jsxs)(n.Fragment,{children:[!e.hideBillSelector&&Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-md-10",children:Object(n.jsx)(S,{onChange:function(e){k(e)}})}),Object(n.jsx)("div",{className:"col-md-2",children:Object(n.jsx)("button",{className:"btn btn-success",onClick:function(){T(Object(n.jsx)(n.Fragment,{})),u(r)},children:"Refresh"})})]}),j&&j.length>0&&w,Object(n.jsxs)("h1",{style:{color:"#D6DBDF",textAlign:"center",display:j.length>0&&"none"},children:["\u4e41( \u2070\u0361  \u0139\u032f \u2070\u0361 ) \u310f",Object(n.jsx)("br",{}),"No Data"]})]})},T=c(95),N=c(96),A=c(97),D=function(e){var t=Object(a.useState)({}),c=Object(d.a)(t,2),r=c[0],s=c[1],l="".concat(p,"/api/tracker/"),o=function(e){e.preventDefault(),h.a.post(l,r).then((function(e){return console.log("saved")}))};return Object(n.jsxs)("form",{onSubmit:function(t){return e.submitForm?e.submitForm(t,r):o},ref:e.formRef,children:[Object(n.jsxs)(T.a,{children:[Object(n.jsx)(N.a,{children:"Bill"}),Object(n.jsx)(S,{onChange:function(t){s(Object(i.a)(Object(i.a)({},r),{},{bill:t.value})),e.setSelBill&&e.setSelBill(t),e.setPerformedAjax&&e.setPerformedAjax(!1)}})]}),Object(n.jsxs)(T.a,{children:[Object(n.jsx)(N.a,{children:"Stage"}),Object(n.jsx)(v.a,{styles:g,placeholder:"Stage...",options:["First reading","Second reading","Committee Stage","Third Reading","Presidential Assent","Passed On"].map((function(e){return{value:e,label:e}})),onChange:function(e){s(Object(i.a)(Object(i.a)({},r),{},{stage:e.value}))}})]}),Object(n.jsxs)(T.a,{children:[Object(n.jsx)(N.a,{children:"Publication Date"}),Object(n.jsx)(A.a,{type:"date",onChange:function(e){return s(Object(i.a)(Object(i.a)({},r),{},{stage_date:e.target.value}))}})]}),Object(n.jsxs)(T.a,{children:[Object(n.jsx)(N.a,{children:"Description"}),Object(n.jsx)(A.a,{placeholder:"further description...",type:"textarea",onChange:function(e){return s(Object(i.a)(Object(i.a)({},r),{},{details:e.target.value}))}})]}),Object(n.jsx)(T.a,{children:Object(n.jsx)(x.a,{outline:!0,color:"success",children:"Save"})})]})},_=function(){var e=Object(a.useState)(),t=Object(d.a)(e,2),c=(t[0],t[1],Object(a.useState)({})),r=Object(d.a)(c,2),s=r[0],i=r[1],l=Object(a.useState)(!1),o=Object(d.a)(l,2),j=o[0],b=o[1],u="".concat(p,"/api/tracker/create");return Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-md-6",children:Object(n.jsx)(D,{submitForm:function(e,t){e.preventDefault();var c=document.head.querySelector('meta[name="csrf-token"]');c&&(h.a.defaults.headers.common["X-CSRFToken"]=c.content),h.a.post(u,t).then((function(e){b(!0),i({value:t.bill})}))},setSelBill:i,setPerformedAjax:b})}),Object(n.jsx)("div",{className:"col-md-6",children:Object(n.jsx)(w,{selBill:s,performedAjax:j,setPerformedAjax:b,hideBillSelector:!0,chronoMode:"v",hideInitBills:!0,isadmin:!0})})]})},M=c(47),P=c(98),E=c(99),Y=c(44),R=c.n(Y);C.a.extend(F.a),C.a.extend(R.a);var I=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),c=t[0],r=t[1],s=Object(a.useState)([]),i=Object(d.a)(s,2),l=i[0],o=i[1],j=Object(a.useState)(!0),b=Object(d.a)(j,2),u=b[0],O=b[1],f="".concat(p,"/api/tracker/list");return Object(a.useEffect)((function(){h.a.get(f).then((function(e){var t=e.data.map((function(e){return{id:e.uuid,bill_id:e.bill,title:C()(e.stage_date).format("MMMM Do, YYYY"),stage_date:e.stage_date,stage:e.stage,cardSubtitle:e.bill_name,cardDetailedText:e.details}}));r(t),o(t),O(!1)})).catch((function(e){return console.log(e)}))}),[]),u?Object(n.jsx)(y,{}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(P.a,{className:"float-right",children:[Object(n.jsx)(x.a,{color:"danger",size:"sm",onClick:function(){o(c)},children:"Reset"}),Object(n.jsxs)(x.a,{color:"danger",size:"sm",onClick:function(){var e=window.open("","my div","height=400,width=1200");e.document.write('<html><head><title>Bills Report</title><link rel="stylesheet" href="/static/dist/css/dokeza.css">'),e.document.write('</head><body><div class="container-fluid">'),e.document.write(document.getElementById("rpt").innerHTML),e.document.write("</div></body></html>"),e.document.close(),setTimeout((function(){e.print()}),1e3)},children:[Object(n.jsx)("i",{className:"fa fa-print","aria-hidden":"true"})," Print"]})]}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{style:{display:"flex",flexFlow:"row wrap",alignContent:"space-between"},children:[Object(n.jsx)("h4",{outline:!0,children:"Filter By: "}),"\xa0",Object(n.jsx)(v.a,{styles:g,placeholder:"Month",options:C.a.monthsShort().map((function(e){return{label:e,value:e}})),onChange:function(e){return o(l.filter((function(t){return C()(t.stage_date).format("MMM")==e.value})))}}),"\xa0",Object(n.jsx)(v.a,{styles:g,placeholder:"Year",options:Object(M.a)(Array(C()(C()()).diff("2016-01-01","year")).keys()).map((function(e){return 2016+e+1})).map((function(e){return e.toString()})).map((function(e){return{label:e,value:e}})),onChange:function(e){return o(l.filter((function(t){return C()(t.stage_date).format("YYYY")==e.value})))}}),"\xa0",Object(n.jsx)(v.a,{styles:g,placeholder:"Stage...",options:["First reading","Second reading","Committee Stage","Third Reading","Presidential Assent","Passed On"].map((function(e){return{value:e,label:e}})),onChange:function(e){o(l.filter((function(t){return t.stage==e.value})))}}),"\xa0",Object(n.jsx)(S,{onChange:function(e){o(l.filter((function(t){return t.bill_id==e.value})))}})]}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{id:"rpt",children:[Object(n.jsx)("link",{rel:"stylesheet",href:"/static/dist/css/dokeza.css"}),Object(n.jsxs)(E.a,{hover:!0,bordered:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Date"}),Object(n.jsx)("th",{children:"Stage"}),Object(n.jsx)("th",{children:"Bill"}),Object(n.jsx)("th",{children:"Details"})]})}),Object(n.jsx)("tbody",{children:l&&l.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e.title}),Object(n.jsx)("td",{children:e.stage}),Object(n.jsx)("td",{children:e.cardSubtitle}),Object(n.jsx)("td",{children:e.cardDetailedText})]},e.id)}))})]})]})]})},L=function(){return Object(n.jsx)(o.a,{children:Object(n.jsx)("div",{className:"container-width",children:Object(n.jsx)("div",{className:"row mt-5",children:Object(n.jsx)("div",{className:"col-md-12",children:Object(n.jsxs)(j.d,{children:[Object(n.jsx)(z,{exact:!0,path:"/tracker/add",component:_}),Object(n.jsx)(j.b,{exact:!0,path:"/tracker/",children:Object(n.jsx)(w,{})}),Object(n.jsx)(j.b,{exact:!0,path:"/tracker/report",component:I})]})})})})})},z=function(e){var t=e.component,c=Object(l.a)(e,["component"]),a=sessionStorage.getItem("uemail");return Object(n.jsx)(j.b,Object(i.a)(Object(i.a)({},c),{},{render:function(e){return a&&""!=a?Object(n.jsx)(t,Object(i.a)({},e)):Object(n.jsx)(j.a,{to:{pathname:"/tracker/"}})}}))},q=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,100)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))};s.a.render(Object(n.jsx)(L,{}),document.getElementById("root")),q()}},[[93,1,2]]]);
//# sourceMappingURL=main.9f20040f.chunk.js.map